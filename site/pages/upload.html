<!DOCTYPE html>
<html>
<head>
    <title>Upload File</title>
    <style>
        body{text-align:center;}
        form{display:block; border:1px solid black;padding:20px; width: 400px; margin: auto}
    </style>
</head>
<body>
<h1>Upload files to Server</h1>

<form id="form" method="POST" enctype="multipart/form-data">
    <input id="file" type="file" name="filetoupload">
    <input type="submit" value="Upload">
</form>
<script src="/js/axios.min.js"></script>
<script>
    const form = document.querySelector('#form');
    const file = document.querySelector('#file');
    form.addEventListener('submit', function(evt) {
        evt.preventDefault();
        if(!file.value) {
            console.log('File empty')
            return;
        }
        form.innerHTML = `<input onFocus='this.select()' value='Loading...' readonly>`
        sendOnServer(file.files[0])
    });

    document.onpaste = function (event) {
        let items = (event.clipboardData || event.originalEvent.clipboardData).items;
        console.log(JSON.stringify(items)); // might give you mime types
        let item = items[0];
        if (item.kind === 'file') {
            form.innerHTML = `<input onFocus='this.select()' value='Loading...' readonly>`
            let blob = item.getAsFile();
            sendOnServer(blob)
        }
    };

    function sendOnServer(file) {
        const config = { headers: { 'Content-Type': 'multipart/form-data' } };
        let fd = new FormData();
        fd.append('image', file)

        axios.post("/upload", fd, config).then(function (response) {
            // handle success
            form.innerHTML = `<input onFocus='this.select()' value='${response.data}' readonly>`
            console.log(response.data);
        })
    }
</script>
</body>
</html>